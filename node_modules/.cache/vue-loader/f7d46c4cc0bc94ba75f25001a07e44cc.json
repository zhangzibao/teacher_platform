{"remainingRequest":"G:\\vue\\Admin\\d_315\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\vue\\Admin\\d_315\\src\\views\\record\\record.vue?vue&type=script&lang=ts&","dependencies":[{"path":"G:\\vue\\Admin\\d_315\\src\\views\\record\\record.vue","mtime":1547110596633},{"path":"G:\\vue\\Admin\\d_315\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1545539517045},{"path":"G:\\vue\\Admin\\d_315\\node_modules\\babel-loader\\lib\\index.js","mtime":1545539497453},{"path":"G:\\vue\\Admin\\d_315\\node_modules\\ts-loader\\index.js","mtime":1546150480400},{"path":"G:\\vue\\Admin\\d_315\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1545539517045},{"path":"G:\\vue\\Admin\\d_315\\node_modules\\vue-loader\\lib\\index.js","mtime":1545539518738}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport api from '../../api';\nimport Vue from 'vue';\nimport {Record} from '@/model';\nimport Component from \"vue-class-component\"\n\ninterface Form {\n    changeValue?: any,\n    changeReason?: any,\n}\n\n@Component\nexport default class MyRecord extends Vue {\n    // data\n    private RecordList: Array<Record> = [];\n    private loading: boolean = true;\n    private dialogVisible: boolean = false;\n    private currentPage: number = 1;\n    private pageSize: number = 8;\n    private record_id: string = '';\n    private itemTotal: number = 0;\n    private form: Form = {\n        changeValue: 0,\n        changeReason: ''\n    };\n\n    // methods\n    private addRecord(): void {\n        const record: Record = {\n            'changeValue': this.form.changeValue,\n            'changeReason': this.form.changeReason\n        };\n        api.addRecord(record).then((data: any) => {\n            this.dialogVisible = false;\n            this.getAllRecord();\n        });\n    }\n\n    private gotoRecord(): void {\n        api.getRecord(this.record_id).then((data: any) => {\n            this.RecordList.splice(0);\n            this.RecordList.push(data);\n            this.itemTotal = this.RecordList.length;\n            this.currentPage = 1;\n            // if (this.RecordList.length === 0) {\n            // console.log('消费记录不存在');\n            // }\n        })\n    }\n\n    private current_change(currentPage: number): void {\n        this.currentPage = currentPage;\n    }\n\n    private getAllRecord(): void {\n        api.getRecord().then((data: any) => {\n            // console.log(data)\n            this.RecordList = data;\n            this.itemTotal = data.length;\n            this.loading = false\n        })\n    }\n\n    // created\n    private created(): void {\n        this.getAllRecord();\n\n    }\n\n    //beforeCreate\n    private beforeCreate(): void {\n        if (!this.$store.state.isLogin) {\n            this.$router.replace('/login')\n        }\n    }\n\n};\n",{"version":3,"sources":["record.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"record.vue","sourceRoot":"src\\views\\record","sourcesContent":["<template>\r\n    <el-col type=\"flex\">\r\n        <el-row type=\"flex\"\r\n                style=\"border-bottom: 1px solid #d0d0d0 ;padding-bottom: 20px;margin-bottom: 20px\"\r\n                justify=\"start\"\r\n        >\r\n            <el-row :span=\"4\"\r\n                    type=\"flex\"\r\n            >\r\n                <el-input v-model=\"record_id\" type=\"number\" placeholder=\"请输入记录id\"/>\r\n            </el-row>\r\n            <el-row type=\"flex\"\r\n                    style=\"margin-right: 20px\"\r\n            >\r\n                <el-button type=\"primary\"\r\n                           icon=\"el-icon-search\"\r\n                           @click=\"gotoRecord()\">\r\n                    搜索\r\n                </el-button>\r\n            </el-row>\r\n            <el-row type=\"flex\">\r\n                <el-button @click=\"dialogVisible = true\"\r\n                           icon=\"el-icon-plus\"\r\n                           type=\"success\"\r\n                           v-if=\"$store.state.myself.isAdmin\"\r\n                >添加记录\r\n                </el-button>\r\n            </el-row>\r\n        </el-row>\r\n        <el-row type=\"flex\">\r\n            <el-table v-loading=\"loading\"\r\n                      style=\"width: 800px;min-height: 426px;\"\r\n                      stripe\r\n                      :data=\"RecordList.slice((currentPage - 1) * pageSize, currentPage * pageSize)\">\r\n                <el-table-column prop=\"id\" label=\"id\" width=\"60\"/>\r\n                <el-table-column prop=\"endBalance\" label=\"当前余额（元）\" width=\"120\"/>\r\n                <el-table-column prop=\"changeValue\" label=\"消费金额（元）\" width=\"120\"/>\r\n                <el-table-column prop=\"changeReason\" label=\"消费原因\"/>\r\n                <el-table-column prop=\"addTime\" label=\"消费时间\" width=\"360\"/>\r\n            </el-table>\r\n        </el-row>\r\n        <el-row type=\"flex\"\r\n                justify=\"center\"\r\n                align=\"middle\"\r\n                style=\"margin:20px\"\r\n        >\r\n            <el-pagination background\r\n                           :page-size=\"pageSize\"\r\n                           layout=\"prev, pager, next\"\r\n                           :total=\"itemTotal\"\r\n                           @current-change=\"current_change\"/>\r\n        </el-row>\r\n        <!--弹出对话框-->\r\n        <el-dialog :visible.sync=\"dialogVisible\"\r\n                   style=\"max-width: 800px;padding:10px 20px;margin: 0 auto\"\r\n                   :modal-append-to-body=\"false\"\r\n                   :append-to-body=\"true\">\r\n            <el-row slot=\"title\" type=\"flex\" justify=\"center\" align=\"middle\">\r\n                <el-col :span=\"5\">添加记录</el-col>\r\n            </el-row>\r\n            <el-form :model=\"form\" label-position=\"left\" label-width=\"80px\">\r\n                <el-row type=\"flex\"\r\n                        justify=\"start\"\r\n                        align=\"middle\"\r\n                >\r\n                    <el-form-item prop=\"changeValue\" label=\"消费金额:\">\r\n                        <el-input type=\"number\"\r\n                                  v-model=\"form.changeValue\"\r\n                                  aria-placeholder=\"单位为元\"\r\n                        />\r\n                    </el-form-item>\r\n                </el-row>\r\n                <el-row type=\"flex\" justify=\"start\">\r\n                    <el-form-item prop=\"changeReason\" label=\"消费原因:\">\r\n                        <el-input type=\"textarea\"\r\n                                  autosize\r\n                                  v-model=\"form.changeReason\"\r\n                        />\r\n                    </el-form-item>\r\n                </el-row>\r\n            </el-form>\r\n            <el-row type=\"flex\" justify=\"end\">\r\n                <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n                <el-button type=\"primary\" @click=\"addRecord()\">保存</el-button>\r\n            </el-row>\r\n        </el-dialog>\r\n    </el-col>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n    import api from '../../api';\r\n    import Vue from 'vue';\r\n    import {Record} from '@/model';\r\n    import Component from \"vue-class-component\"\r\n\r\n    interface Form {\r\n        changeValue?: any,\r\n        changeReason?: any,\r\n    }\r\n\r\n    @Component\r\n    export default class MyRecord extends Vue {\r\n        // data\r\n        private RecordList: Array<Record> = [];\r\n        private loading: boolean = true;\r\n        private dialogVisible: boolean = false;\r\n        private currentPage: number = 1;\r\n        private pageSize: number = 8;\r\n        private record_id: string = '';\r\n        private itemTotal: number = 0;\r\n        private form: Form = {\r\n            changeValue: 0,\r\n            changeReason: ''\r\n        };\r\n\r\n        // methods\r\n        private addRecord(): void {\r\n            const record: Record = {\r\n                'changeValue': this.form.changeValue,\r\n                'changeReason': this.form.changeReason\r\n            };\r\n            api.addRecord(record).then((data: any) => {\r\n                this.dialogVisible = false;\r\n                this.getAllRecord();\r\n            });\r\n        }\r\n\r\n        private gotoRecord(): void {\r\n            api.getRecord(this.record_id).then((data: any) => {\r\n                this.RecordList.splice(0);\r\n                this.RecordList.push(data);\r\n                this.itemTotal = this.RecordList.length;\r\n                this.currentPage = 1;\r\n                // if (this.RecordList.length === 0) {\r\n                // console.log('消费记录不存在');\r\n                // }\r\n            })\r\n        }\r\n\r\n        private current_change(currentPage: number): void {\r\n            this.currentPage = currentPage;\r\n        }\r\n\r\n        private getAllRecord(): void {\r\n            api.getRecord().then((data: any) => {\r\n                // console.log(data)\r\n                this.RecordList = data;\r\n                this.itemTotal = data.length;\r\n                this.loading = false\r\n            })\r\n        }\r\n\r\n        // created\r\n        private created(): void {\r\n            this.getAllRecord();\r\n\r\n        }\r\n\r\n        //beforeCreate\r\n        private beforeCreate(): void {\r\n            if (!this.$store.state.isLogin) {\r\n                this.$router.replace('/login')\r\n            }\r\n        }\r\n\r\n    };\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .col-title {\r\n        text-align: left;\r\n        margin-bottom: 10px;\r\n    }\r\n\r\n    .title {\r\n        font-size: 14px;\r\n        font-weight: bolder;\r\n    }\r\n</style>\r\n"]}]}